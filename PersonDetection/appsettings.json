{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "PersonDetection": "Information"
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Server=DESKTOP-QML0799;Database=DetectionContext;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "DetectionConfig": {
    "ConfidenceThreshold": 0.30,
    "NmsThreshold": 0.45,
    "MinWidth": 10,
    "MinHeight": 25,
    "ModelInputSize": 640,
    "YoloModelPath": "Models/yolo11s.onnx",
    "ReIdModelPath": "Models/osnet_x1_0.onnx",
    "UseGpu": false
  },
  "IdentityConfig": {
    "_comment_thresholds": "=== MATCHING THRESHOLDS ===",
    "MinDistanceForNewIdentity": 0.10,
    "DistanceThreshold": 0.30,
    "GlobalMatchThreshold": 0.45,
    "SimilarityThreshold": 0.65,
    "MinSeparationRatio": 1.10,

    "_comment_temporal": "=== TEMPORAL MATCHING ===",
    "EnableTemporalMatching": true,
    "MaxSecondsForActiveMatch": 10,
    "MaxMinutesForRecentMatch": 2,
    "PenaltyForStaleMatch": 0.15,
    "RequireRecentActivityForMatch": true,

    "_comment_entry": "=== ENTRY ZONE DETECTION ===",
    "EnableEntryZoneDetection": false,
    "EntryZoneMarginPercent": 15,
    "NewPersonBonusDistance": 0.05,

    "_comment_stability": "=== MATCH STABILITY ===",
    "MatchStabilityFrames": 2,

    "_comment_confirmation": "=== CONFIRMATION SETTINGS ===",
    "EnableConfidenceBasedConfirmation": true,
    "MinConfidenceForConfirmation": 0.35,
    "MinHighConfidenceDetections": 2,
    "FastWalkerTimeWindowSeconds": 5.0,
    "EnableFastWalkerMode": true,
    "ConfirmationMatchCount": 1,
    "AmbiguousMatchAsConfirmed": true,
    "InstantConfirmConfidence": 0.45,
    "VeryHighConfidenceThreshold": 0.60,

    "_comment_cache": "=== CACHE & MEMORY ===",
    "CacheExpirationMinutes": 30,
    "MaxIdentitiesInMemory": 1000,
    "UpdateVectorOnMatch": false,
    "UseAdaptiveThreshold": false,
    "RequireMinimumSeparation": false,

    "_comment_crop": "=== CROP SIZE ===",
    "MinCropWidth": 20,
    "MinCropHeight": 40,
    "MinCropAreaMultiplier": 0.4,
    "MinCropDimensionMultiplier": 0.7,

    "_comment_global": "=== GLOBAL MATCHING ===",
    "EnableGlobalMatching": true,
    "LoadFromDatabaseOnStartup": true,
    "DatabaseLoadHours": 2,

    "_comment_consolidation": "=== CONSOLIDATION ===",
    "EnableIdentityConsolidation": false,
    "ConsolidationThreshold": 0.10,

    "_comment_validation": "=== FEATURE VALIDATION ===",
    "MinFeatureVariance": 0.000001,
    "FeatureVectorDimension": 512,
    "MinConfidenceForSmallDetection": 0.20,
    "SingleFrameInstantConfirmConfidence": 0.60
  },
  "TrackingConfig": {
    "_comment_spatial": "=== SPATIAL TRACKING ===",
    "NormalMaxDistance": 120,
    "FastWalkerMaxDistance": 250,
    "FeatureMatchBonusDistance": 80,
    "FeatureMatchThreshold": 0.35,
    "PredictionMatchBonus": 0.8,

    "_comment_stable": "=== STABLE TRACK SETTINGS ===",
    "StableTrackMinFrames": 1,
    "StableTrackMinConfidence": 0.35,
    "FastWalkerStableFrames": 1,
    "FastWalkerStableConfidence": 0.35,

    "_comment_velocity": "=== VELOCITY TRACKING ===",
    "VelocitySmoothingAlpha": 0.6,
    "FastWalkerSpeedThreshold": 60,

    "_comment_cleanup": "=== TRACK CLEANUP ===",
    "NormalTrackTimeoutSeconds": 2.0,
    "FastWalkerTrackTimeoutSeconds": 3.0,

    "_comment_confirm": "=== CONFIRMATION ===",
    "TwoFrameConfirmMinConfidence": 0.35,
    "HighConfSingleFrameThreshold": 0.45,
    "MaxPendingConfirmationAge": 8,
    "MaxPendingConfirmationSeconds": 3.0,

    "_comment_legacy": "=== LEGACY SETTINGS ===",
    "MaxAge": 30,
    "MinHits": 2,
    "IouThreshold": 0.3,
    "MaxPositionDistance": 200,
    "VelocityWeight": 0.4,
    "UseKalmanPrediction": true,
    "SingleFrameInstantThreshold": 0.60
  },
  "StreamingConfig": {
    "ReIdEveryNFrames": 1,
    "FrameBufferSize": 2,
    "TargetFps": 25,
    "ReconnectDelayMs": 3000,
    "MaxReconnectAttempts": 5,
    "JpegQuality": 80,
    "ProcessingIntervalMs": 40,
    "DetectionIntervalMs": 50,
    "ResizeWidth": 1280,
    "ResizeHeight": 720,
    "SkipFrames": 0,
    "UseHardwareAcceleration": true,
    "EnableFastOverlay": true,
    "OverlayFontScale": 0.5,
    "OverlayThickness": 2,
    "ShowConfidence": true,
    "ShowTrackId": true
  },
  "PersistenceConfig": {
    "SaveToDatabase": true,
    "SaveIntervalSeconds": 2,
    "OnlyOnCountChange": false,
    "MinCountChangeThreshold": 1,
    "MaxStoredResults": 1000,
    "CleanupIntervalMinutes": 60,
    "BatchSaveEnabled": true,
    "BatchSize": 10
  },
  "SignalRConfig": {
    "MaximumReceiveMessageSize": 102400,
    "KeepAliveIntervalSeconds": 15,
    "ClientTimeoutSeconds": 30
  }
}