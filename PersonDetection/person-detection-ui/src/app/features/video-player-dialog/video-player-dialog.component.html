<!-- src/app/features/video-player-dialog/video-player-dialog.component.html -->

<div class="video-player-dialog" [class.portrait]="isPortrait()">
    <div class="dialog-header">
        <h2>
            <mat-icon>play_circle</mat-icon>
            <span>{{ fileName() }}</span>
        </h2>
        <button mat-icon-button (click)="close()" aria-label="Close">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <div class="video-container">
        @if (isLoading()) {
        <div class="loading-overlay">
            <mat-spinner diameter="44"></mat-spinner>
            <p>Loading video...</p>
        </div>
        }

        @if (hasError()) {
        <div class="error-overlay">
            <mat-icon>error_outline</mat-icon>
            <p>{{ errorMessage() }}</p>
            <button mat-raised-button (click)="close()">Close</button>
        </div>
        }

        @if (!hasError() && videoUrl) {
        <video #videoElement controls autoplay [src]="videoUrl" (loadedmetadata)="onVideoLoaded()"
            (error)="onVideoError($event)" playsinline>
            Your browser does not support the video tag.
        </video>
        }
    </div>

    <div class="dialog-actions">
        <button mat-button (click)="close()">
            <mat-icon>close</mat-icon>
            Close
        </button>
        <button mat-raised-button (click)="downloadVideo()">
            <mat-icon>download</mat-icon>
            Download
        </button>
    </div>
</div>